!function e(t,a,s){function r(o,l){if(!a[o]){if(!t[o]){var i="function"==typeof require&&require;if(!l&&i)return i(o,!0);if(n)return n(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var p=a[o]={exports:{}};t[o][0].call(p.exports,function(e){var a=t[o][1][e];return r(a?a:e)},p,p.exports,e,t,a,s)}return a[o].exports}for(var n="function"==typeof require&&require,o=0;o<s.length;o++)r(s[o]);return r}({"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/actions/action-creators.js":[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function n(){return{type:O.REQUEST_ADMIN_SUBREGIONS}}function o(e){return{type:O.RECEIVE_ADMIN_SUBREGIONS,json:e,receivedAt:Date.now()}}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){t(n());var a=null===e?V["default"].api+"/admin/subregions":V["default"].api+"/admin/"+e+"/subregions";return console.time("fetch subregions"),(0,U["default"])(a).then(function(e){return e.json()}).then(function(e){console.timeEnd("fetch subregions"),t(o(e))})}}function i(e){return{type:O.REQUEST_SEARCH_RESULTS,query:e}}function c(e){return{type:O.RECEIVE_SEARCH_RESULTS,json:e,receivedAt:Date.now()}}function p(){return{type:O.CLEAN_SEARCH_RESULTS}}function u(e){return function(t){return t(i(e)),console.time("fetch search results"),(0,U["default"])(V["default"].api+"/admin/search/"+e).then(function(e){return e.json()}).then(function(e){console.timeEnd("fetch search results"),t(c(e))})}}function d(){return{type:O.REQUEST_ADMIN_STATS}}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:O.RECEIVE_ADMIN_STATS,json:e,error:t,receivedAt:Date.now()}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){t(d());var a=null===e?V["default"].api+"/admin/0/stats":V["default"].api+"/admin/"+e+"/stats";return(0,U["default"])(a).then(function(e){if(e.status>=400)throw new Error("Bad response");return e.json()}).then(function(e){t(f(e))},function(e){return console.log("e",e),t(f(null,"Data not available"))})}}function m(){return{type:O.REQUEST_TOFIX_TASKS}}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:O.RECEIVE_TOFIX_TASKS,json:e,error:t,receivedAt:Date.now()}}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1],a=arguments[2];return function(s){s(m());var r=null===e?V["default"].api+"/admin/0/waytasks?page="+--t+"&limit="+a:V["default"].api+"/admin/"+e+"/waytasks?page="+--t+"&limit="+a;return(0,U["default"])(r).then(function(e){if(e.status>=400)throw new Error("Bad response");return e.json()}).then(function(e){return s(g(e))},function(e){return console.log("e",e),s(g(null,"Data not available"))})}}function y(){return{type:O.REQUEST_PROJECT_TASKS}}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:O.RECEIVE_PROJECT_TASKS,json:e,error:t,receivedAt:Date.now()}}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1],a=arguments[2];return function(s){s(y());var r=null===e?V["default"].api+"/admin/0/projecttasks?page="+--t+"&limit="+a:V["default"].api+"/admin/"+e+"/projecttasks?page="+--t+"&limit="+a;return(0,U["default"])(r).then(function(e){if(e.status>=400)throw new Error("Bad response");return e.json()}).then(function(e){return s(v(e))},function(e){return console.log("e",e),s(v(null,"Data not available"))})}}function _(){return{type:O.REQUEST_PROJECTS}}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:O.RECEIVE_PROJECTS,json:e,error:t,receivedAt:Date.now()}}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1],a=arguments[2],s=arguments[3];return function(r){r(_());var n=[];M["default"].forEach(s,function(e,t){e&&"--"!==e&&n.push(t+"="+e)});var o=null===e?V["default"].api+"/admin/0/projects?page="+--t+"&limit="+a:V["default"].api+"/admin/"+e+"/projects?page="+--t+"&limit="+a;return n.length&&(o+="&"+n.join("&")),(0,U["default"])(o).then(function(e){if(e.status>=400)throw new Error("Bad response");return e.json()}).then(function(e){return r(T(e))},function(e){return console.log("e",e),r(T(null,"Data not available"))})}}function N(){return{type:O.REQUEST_PROJECTS_META}}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:O.RECEIVE_PROJECTS_META,json:e,error:t,receivedAt:Date.now()}}function w(){return function(e){return e(N()),(0,U["default"])(V["default"].api+"/meta/projects").then(function(e){if(e.status>=400)throw new Error("Bad response");return e.json()}).then(function(t){return e(k(t))},function(t){return console.log("e",t),e(k(null,"Data not available"))})}}function R(){return{type:O.REQUEST_ROAD_NETWORK_STATUS}}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:O.RECEIVE_ROAD_NETWORK_STATUS,json:e,error:t,receivedAt:Date.now()}}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){t(R());var a=null===e?V["default"].api+"/admin/0?roadNetwork=true":V["default"].api+"/admin/"+e+"?roadNetwork=true";return(0,U["default"])(a).then(function(e){return e.json()}).then(function(e){if(console.log("json",e),400===e.statusCode&&e.message.match(/greater than maximum/))return{dataAvailable:!1};if(e.statusCode>400)throw new Error("Bad response");return{dataAvailable:!0}}).then(function(e){return t(j(e))},function(e){return console.log("e",e),t(j(null,"Data not available"))})}}function P(){return{type:O.REQUEST_VPROMMS_IDS}}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:O.RECEIVE_VPROMMS_IDS,json:e,error:t,receivedAt:Date.now()}}function C(){return function(e){e(P());var t=V["default"].api+"/ids";return(0,U["default"])(t).then(function(e){return e.json()}).then(function(t){if(400===t.statusCode)return{dataAvailable:!1};if(t.statusCode>400)throw new Error("Bad response");e(A(t))})}}Object.defineProperty(a,"__esModule",{value:!0}),a.fetchAdminSubregions=l,a.cleanSearchResults=p,a.fetchSearchResults=u,a.fetchAdminStats=h,a.fetchTofixTasks=E,a.fetchProjectTasks=b,a.fetchProjects=S,a.fetchProjectsMeta=w,a.fetchRoadNetworkStatus=D,a.fetchVProMMSids=C;var I=e("isomorphic-fetch"),U=r(I),x=e("lodash"),M=r(x),L=e("./action-types"),O=s(L),Y=e("../config"),V=r(Y)},{"../config":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/config.js","./action-types":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/actions/action-types.js","isomorphic-fetch":"isomorphic-fetch",lodash:"lodash"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/actions/action-types.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.REQUEST_ADMIN_SUBREGIONS="REQUEST_ADMIN_SUBREGIONS",a.RECEIVE_ADMIN_SUBREGIONS="RECEIVE_ADMIN_SUBREGIONS",a.REQUEST_SEARCH_RESULTS="REQUEST_SEARCH_RESULTS",a.RECEIVE_SEARCH_RESULTS="RECEIVE_SEARCH_RESULTS",a.CLEAN_SEARCH_RESULTS="CLEAN_SEARCH_RESULTS",a.REQUEST_ADMIN_STATS="REQUEST_ADMIN_STATS",a.RECEIVE_ADMIN_STATS="RECEIVE_ADMIN_STATS",a.REQUEST_TOFIX_TASKS="REQUEST_TOFIX_TASKS",a.RECEIVE_TOFIX_TASKS="RECEIVE_TOFIX_TASKS",a.REQUEST_PROJECTS="REQUEST_PROJECTS",a.RECEIVE_PROJECTS="RECEIVE_PROJECTS",a.REQUEST_PROJECT_TASKS="REQUEST_PROJECT_TASKS",a.RECEIVE_PROJECT_TASKS="RECEIVE_PROJECT_TASKS",a.REQUEST_PROJECTS_META="REQUEST_PROJECTS_META",a.RECEIVE_PROJECTS_META="RECEIVE_PROJECTS_META",a.REQUEST_ROAD_NETWORK_STATUS="REQUEST_ROAD_NETWORK_STATUS",a.RECEIVE_ROAD_NETWORK_STATUS="RECEIVE_ROAD_NETWORK_STATUS",a.REQUEST_VPROMMS_IDS="REQUEST_VPROMMS_IDS",a.RECEIVE_VPROMMS_IDS="RECEIVE_VPROMMS_IDS"},{}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/components/aa-list.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var r=e("react"),n=s(r),o=e("react-router"),l=e("classnames"),i=s(l),c=e("../utils/id"),p=s(c),u=n["default"].createClass({displayName:"AAList",propTypes:{fetched:n["default"].PropTypes.bool,fetching:n["default"].PropTypes.bool,adminAreaId:n["default"].PropTypes.number,adminAreaName:n["default"].PropTypes.string,adminAreas:n["default"].PropTypes.array,sliceList:n["default"].PropTypes.bool},sliceSize:10,thresholds:[30,70],ID:null,renderAdminAreaRow:function(e,t){var a="-",s=null;return isNaN(e.completeness)||(a=Math.round(1e3*e.completeness)/10,s={"progress-bar--low":a<this.thresholds[0],"progress-bar--med":a>=this.thresholds[0]&&a<=this.thresholds[1],"progress-bar--high":a>this.thresholds[1]},a+="%"),n["default"].createElement("tr",{key:"adminArea"+t},n["default"].createElement("td",{colSpan:"2"},n["default"].createElement(o.Link,{to:"/analytics/"+e.id},e.name),n["default"].createElement("ul",{className:(0,i["default"])("progress-bar progress-bar--inline",s)},n["default"].createElement("li",{style:{width:""+a}},n["default"].createElement("span",{className:"value"},a)))))},renderAdminAreaTable:function(){if(!this.props.adminAreas.length)return this.ID.identify()===this.ID.BARANGAY?n["default"].createElement("div",null,n["default"].createElement("h2",{className:"hd-s"},"Administrative Areas"),n["default"].createElement("p",{className:"aa-list__empty"},n["default"].createElement("strong",null,this.props.adminAreaName)," is a barangay and there are no lower administrative areas to show")):n["default"].createElement("p",null,"No data available");var e=void 0;return e=this.props.sliceList?this.props.adminAreas.slice(0,this.sliceSize):this.props.adminAreas,n["default"].createElement("div",null,n["default"].createElement("h2",{className:"hd-s"},this.ID.getChildDisplayType(!0)," of ",this.props.adminAreaName||"Philippines"),n["default"].createElement("table",{className:"aa-list__table"},n["default"].createElement("thead",null,n["default"].createElement("tr",null,n["default"].createElement("th",{className:"aa-list-title"},this.ID.getChildDisplayType()," ",n["default"].createElement("span",{className:"badge"},this.props.adminAreas.length)),n["default"].createElement("th",{className:"aa-list-chart"},"Completeness"))),n["default"].createElement("tbody",null,e.map(this.renderAdminAreaRow))))},renderViewAll:function(){return!this.props.sliceList||this.props.adminAreas.length<=this.sliceSize?null:this.props.adminAreaId?n["default"].createElement(o.Link,{to:"/analytics/"+this.props.adminAreaId+"/admin-areas",className:"bttn-view-more"},"View all ",this.ID.getChildDisplayType(!0)):n["default"].createElement(o.Link,{to:"/analytics/admin-areas",className:"bttn-view-more"},"View all ",this.ID.getChildDisplayType(!0))},renderLoadingPlaceholder:function(){return n["default"].createElement("div",{className:"aa-list placeholder"},n["default"].createElement("h2",{className:"hd-s"}," "),n["default"].createElement("table",{className:"aa-list__table"},n["default"].createElement("thead",null,n["default"].createElement("tr",null,n["default"].createElement("th",{className:"aa-list-title"},n["default"].createElement("span",null," ")),n["default"].createElement("th",{className:"aa-list-chart"},n["default"].createElement("span",null," ")))),n["default"].createElement("tbody",null,[0,0,0].map(function(e,t){return n["default"].createElement("tr",{key:t},n["default"].createElement("td",{colSpan:"2"},n["default"].createElement("p",null," "),n["default"].createElement("ul",{className:"progress-bar progress-bar--inline"},n["default"].createElement("li",null,n["default"].createElement("span",{className:"value"}," ")))))}))))},render:function(){return this.props.fetched||this.props.fetching?this.props.fetching?this.renderLoadingPlaceholder():(this.ID=new p["default"](this.props.adminAreaId),n["default"].createElement("div",{className:"aa-list"},this.renderAdminAreaTable(),this.renderViewAll())):null}});t.exports=u},{"../utils/id":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/utils/id.js",classnames:"classnames",react:"react","react-router":"react-router"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/components/aa-tofix-tasks.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var r=e("react"),n=s(r),o=e("react-router"),l=n["default"].createClass({displayName:"AATofixTasks",propTypes:{fetched:n["default"].PropTypes.bool,fetching:n["default"].PropTypes.bool,adminAreaId:n["default"].PropTypes.number,adminAreaName:n["default"].PropTypes.string,tasks:n["default"].PropTypes.array,meta:n["default"].PropTypes.object,error:n["default"].PropTypes.string,sliceList:n["default"].PropTypes.bool},renderWayTasks:function(e){return n["default"].createElement("li",{key:e.way_id},n["default"].createElement(i,{id:e.way_id,state:e.state,items:e.tasks}))},renderViewAllLink:function(){if(!this.props.sliceList)return null;var e=this.props.meta,t=e.limit,a=e.total;if(a>t){var s="/analytics/"+this.props.adminAreaId+"/tasks";return n["default"].createElement(o.Link,{to:s,className:"bttn-view-more"},"View all tasks")}},renderContent:function(){var e=void 0;return this.props.fetching?e=n["default"].createElement("ul",{className:"loading-placeholder"},n["default"].createElement(c,null),n["default"].createElement(c,null),n["default"].createElement(c,null)):this.props.error?e=n["default"].createElement("p",{className:"aa-tofixtasks--empty"},"Oops... An error occurred."):this.props.meta.total||(e=n["default"].createElement("p",{className:"aa-tofixtasks--empty"},"Nothing to show.")),e?n["default"].createElement("div",{className:"aa-tofixtasks__contents"},e):n["default"].createElement("div",{className:"aa-tofixtasks__contents"},n["default"].createElement("ul",null,this.props.tasks.map(this.renderWayTasks)),this.renderViewAllLink())},render:function(){if(!this.props.fetched&&!this.props.fetching)return null;var e="Missing Properties";return this.props.fetched&&!this.props.fetching&&this.props.meta.total&&(e+=" ("+this.props.meta.total+")"),n["default"].createElement("div",{className:"aa-tofixtasks"},n["default"].createElement("h2",{className:"aa-tofixtasks__title"},e),this.renderContent())}}),i=n["default"].createClass({displayName:"AATofixTaskItem",propTypes:{items:n["default"].PropTypes.array,id:n["default"].PropTypes.number,state:n["default"].PropTypes.string},render:function(){return n["default"].createElement(o.Link,{to:"editor/id=w"+this.props.id,className:"aa-tofixtasks__wrapper"},n["default"].createElement("div",{className:"flag"},n["default"].createElement("div",{className:"flag__image"},n["default"].createElement("div",{className:"aa-tofixtasks__map"},this.props.id)),n["default"].createElement("div",{className:"flag__body"},n["default"].createElement("h2",null,"Way ",this.props.id," ","pending"===this.props.state?n["default"].createElement("small",null,"In review"):null),n["default"].createElement("ul",null,this.props.items.map(function(e,t){return n["default"].createElement("li",{key:t},e.details)})))))}}),c=n["default"].createClass({displayName:"AATofixTaskItemLoading",render:function(){return n["default"].createElement("li",{className:"aa-tofixtasks__wrapper"},n["default"].createElement("div",{className:"flag"},n["default"].createElement("div",{className:"flag__image"},n["default"].createElement("div",{className:"aa-tofixtasks__map"}," ")),n["default"].createElement("div",{className:"flag__body"},n["default"].createElement("p",null," "),n["default"].createElement("p",null," "))))}});t.exports=l},{react:"react","react-router":"react-router"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/components/dropdown.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},n=e("react"),o=s(n),l=o["default"].createClass({displayName:"Dropdown",propTypes:{className:o["default"].PropTypes.string,triggerTitle:o["default"].PropTypes.string,triggerClassName:o["default"].PropTypes.string,triggerText:o["default"].PropTypes.string,closeDropdown:o["default"].PropTypes.func,evtClick:o["default"].PropTypes.bool,evtOverOut:o["default"].PropTypes.bool,children:o["default"].PropTypes.node},_bodyListener:function(e){var t=e.target;if("BODY"===t.tagName||"HTML"===t.tagName||"dropdown:close"===e.target.getAttribute("data-hook"))return void this.setState({open:!1});do{if(t&&"dropdown"===t.getAttribute("data-hook"))break;t=t.parentNode}while(t&&"BODY"!==t.tagName&&"HTML"!==t.tagName);t!==this.refs.dropdown&&this.setState({open:!1})},getDefaultProps:function(){return{element:"div",className:"",triggerTitle:"",triggerClassName:"",triggerText:"",evtClick:!0,evtOverOut:!0}},getInitialState:function(){return{open:!1}},componentDidMount:function(){window.addEventListener("click",this._bodyListener)},componentWillUnmount:function(){window.removeEventListener("click",this._bodyListener)},_toggleDropdown:function(e){e.preventDefault(),this.setState({open:!this.state.open})},_onTriggerClick:function(e){e.preventDefault(),this.props.evtClick&&this._toggleDropdown(e)},render:function(){var e=["drop"];this.state.open&&e.push("open"),this.props.className&&e.push(this.props.className);var t={onClick:this._onTriggerClick,onMouseOver:this._toggleDropdown,onMouseOut:this._toggleDropdown};return this.props.evtOverOut||(delete t.onMouseOver,delete t.onMouseOut),o["default"].createElement(this.props.element,{className:e.join(" "),"data-hook":"dropdown",ref:"dropdown"},o["default"].createElement("a",r({href:"#",title:this.props.triggerTitle,className:this.props.triggerClassName},t),o["default"].createElement("span",null,this.props.triggerText)),o["default"].createElement("div",{className:"drop-content popover-behavior"},this.props.children))}});t.exports=l},{react:"react"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/components/page-header.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var r=e("react"),n=s(r),o=e("react-router"),l=e("../utils/id"),i=s(l),c=e("../components/dropdown"),p=s(c),u=e("../config"),d=s(u),f=n["default"].createClass({displayName:"PageHeader",propTypes:{pageTitle:n["default"].PropTypes.string,adminAreaId:n["default"].PropTypes.number,roadNetworkStatus:n["default"].PropTypes.object,bbox:n["default"].PropTypes.array},renderDownloaRoadNetwork:function(){var e=this.props.roadNetworkStatus,t=e.fetched,a=e.fetching,s=e.data,r=e.error;return!t||a?n["default"].createElement("li",null,n["default"].createElement(o.Link,{to:"/",className:"bttn-road-network disabled"},"Checking download")):s.dataAvailable?n["default"].createElement("li",null,n["default"].createElement("a",{href:d["default"].api+"/admin/"+this.props.adminAreaId+"?roadNetwork=true",className:"bttn-road-network",title:"Download road network",target:"_blank"},"Download road network")):n["default"].createElement(p["default"],{element:"li",className:"dropdown center",triggerClassName:"bttn-road-network disabled",triggerText:"Download road network",evtClick:!1},n["default"].createElement("div",{className:"drop-info"},r?n["default"].createElement("p",null,"There was an error with the server. Please contact an administrator."):n["default"].createElement("p",null,"It's not possible to download the road network for such a large area.")))},render:function(){var e=new i["default"](this.props.adminAreaId),t=e.level();return n["default"].createElement("header",{className:"page__header"},n["default"].createElement("div",{className:"inner"},n["default"].createElement("div",{className:"page__breadcrumbs"},n["default"].createElement("ul",{className:"breadcrumbs"},n["default"].createElement("li",null,n["default"].createElement(o.Link,{to:"/analytics"},"Country")),t>=1?n["default"].createElement("li",null,n["default"].createElement(o.Link,{to:"/analytics/"+e.parentID(1)},"Region")):null,t>=2?n["default"].createElement("li",null,n["default"].createElement(o.Link,{to:"/analytics/"+e.parentID(2)},"Province")):null,t>=3?n["default"].createElement("li",null,n["default"].createElement(o.Link,{to:"/analytics/"+e.parentID(3)},"Municipality")):null,t>=4?n["default"].createElement("li",null,n["default"].createElement(o.Link,{to:"/analytics/"+e.parentID(4)},"Barangay")):null)),n["default"].createElement("div",{className:"page__headline"},n["default"].createElement("h1",{className:"page__title"},this.props.pageTitle)),n["default"].createElement("div",{className:"page__actions"},n["default"].createElement("ul",{className:"actions-menu"},n["default"].createElement("li",null,n["default"].createElement(o.Link,{to:"/editor/bbox="+this.props.bbox.join("/"),className:"bttn-edit"},"Improve map")),this.renderDownloaRoadNetwork()))))}});t.exports=f},{"../components/dropdown":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/components/dropdown.js","../config":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/config.js","../utils/id":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/utils/id.js",react:"react","react-router":"react-router"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/components/project-list.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var r=e("react"),n=s(r),o=e("react-router"),l=e("lodash"),i=s(l),c=e("../utils/format"),p=n["default"].createClass({displayName:"ProjectList",propTypes:{fetched:n["default"].PropTypes.bool,fetching:n["default"].PropTypes.bool,adminAreaId:n["default"].PropTypes.number,adminAreaName:n["default"].PropTypes.string,projects:n["default"].PropTypes.array,projectsMeta:n["default"].PropTypes.object,activeFilters:n["default"].PropTypes.object,meta:n["default"].PropTypes.object,error:n["default"].PropTypes.string,sliceList:n["default"].PropTypes.bool,onFilterApply:n["default"].PropTypes.func},onFilterApply:function(e){var t=i["default"].clone(this.props.activeFilters);t.type=this.refs["filters-type"].value,this.props.onFilterApply(t)},renderViewAllLink:function(){if(!this.props.sliceList)return null;var e=this.props.meta,t=e.limit,a=e.total;if(a>t){var s="/analytics/"+this.props.adminAreaId+"/projects";return n["default"].createElement("div",{className:"actions"},n["default"].createElement(o.Link,{to:s,className:"bttn-view-more"},"View all projects"))}},renderContent:function(){var e=this,t=void 0;return this.props.fetching?t=n["default"].createElement("p",null,"Loading projects..."):this.props.error?t=n["default"].createElement("p",{className:"aa-stats--empty"},"Oops... An error occurred."):this.props.meta.total||(t=n["default"].createElement("p",{className:"aa-stats--empty"},"No projects to show.")),t?t:n["default"].createElement("div",{className:"prj-list"},n["default"].createElement("table",{className:"prj-list__table table"},n["default"].createElement("thead",null,n["default"].createElement("tr",null,n["default"].createElement("th",null,"Scope"),n["default"].createElement("th",null,"Type"),n["default"].createElement("th",null,"Code"),n["default"].createElement("th",null,"Description"),n["default"].createElement("th",null,"Year"),n["default"].createElement("th",null,"Length (km)"),n["default"].createElement("th",null,"Cost"))),n["default"].createElement("tbody",null,this.props.projects.map(function(t){return n["default"].createElement("tr",{key:t.id},n["default"].createElement("th",{scope:"row"},(0,c.formatTableText)(t.scope)),n["default"].createElement("td",null,t.type),n["default"].createElement("td",null,e.renderTableLink(t)),n["default"].createElement("td",null,(0,c.formatTableText)(t.name)),n["default"].createElement("td",null,t.year),n["default"].createElement("td",null,(0,c.formatThousands)(t.length,1)),n["default"].createElement("td",null,(0,c.formatCurrency)(t.cost,0)))}))),this.renderViewAllLink())},renderTableLink:function(e){var t=e.bbox;if(!t||!t.length)return e.code;var a=t[0]===t[2]&&t[1]===t[3]?"map=14/"+t[0]+"/"+t[1]:"bbox="+t.join("/"),s=e.type.replace(" ","-").toLowerCase();return n["default"].createElement(o.Link,{to:"/editor/"+a+"&overlays="+s},e.code)},renderControls:function(){if(this.props.sliceList||this.props.fetching)return null;var e=this.props.activeFilters;return n["default"].createElement("div",{className:"projects-controls"},n["default"].createElement("div",{className:"form-horizontal"},n["default"].createElement("label",{htmlFor:"filter-type",className:"form-label"},"Project type"),n["default"].createElement("select",{id:"filter-type",className:"form-control input-m filter-select",ref:"filters-type",defaultValue:e.type},n["default"].createElement("option",{value:"--"},"All"),this.props.projectsMeta.type.map(function(e){return n["default"].createElement("option",{key:i["default"].kebabCase(e),value:e},e)}))),n["default"].createElement("button",{className:"bttn-filter",onClick:this.onFilterApply},"Apply filter"))},render:function(){if(!this.props.fetched&&!this.props.fetching)return null;var e="Projects";return this.props.fetched&&!this.props.fetching&&this.props.meta.total&&(e+=" ("+this.props.meta.total+")"),n["default"].createElement("div",{className:"aa-stats--projects"},n["default"].createElement("h2",{className:"aa-stats__title"},e),this.renderControls(),n["default"].createElement("div",{className:"aa-stats__contents"},this.renderContent()))}});a["default"]=p},{"../utils/format":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/utils/format.js",lodash:"lodash",react:"react","react-router":"react-router"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/components/search.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var r=e("react"),n=s(r),o=e("lodash"),l=s(o),i=e("classnames"),c=s(i),p=e("react-router"),u=e("../utils/id"),d=s(u),f=e("../utils/dom"),h=n["default"].createClass({displayName:"Search",propTypes:{fetchSearchResults:n["default"].PropTypes.func,cleanSearchResults:n["default"].PropTypes.func,onResultClick:n["default"].PropTypes.func,results:n["default"].PropTypes.array,searching:n["default"].PropTypes.bool,isEditor:n["default"].PropTypes.bool,fetching:n["default"].PropTypes.bool},onSearchQueryChange:function(){var e=l["default"].trim(this.refs.searchBox.value);e.length>=3?this.props.fetchSearchResults(e):this.props.cleanSearchResults()},searchClick:function(e){if(e.preventDefault(),!this.props.fetching){var t=l["default"].trim(this.refs.searchBox.value);t.length&&this.props.fetchSearchResults(t)}},onDocumentClick:function(e){(0,f.isDescendent)(e.target,this.refs.searchForm)||this.props.searching&&this.resetSearchResults()},onKeyup:function(e){27===e.keyCode&&this.props.searching&&(this.refs.searchBox.blur(),this.resetSearchResults())},onResultClick:function(e){this.resetSearchResults(),this.props.onResultClick&&this.props.onResultClick(e)},resetSearchResults:function(){this.refs.searchBox.value="",this.props.cleanSearchResults()},componentDidMount:function(){document.addEventListener("click",this.onDocumentClick,!1),document.addEventListener("keyup",this.onKeyup,!1)},componentWillUnmount:function(){document.removeEventListener("click",this.onDocumentClick,!1),document.removeEventListener("keyup",this.onKeyup,!1)},renderResults:function(){var e=this;if(this.props.fetching)return n["default"].createElement("p",{className:"info"},"Loading...");if(0===this.props.results.length)return n["default"].createElement("p",{className:"info"},"No results available. Please refine your search.");var t=l["default"].groupBy(this.props.results,"type"),a=[];return l["default"].forEach(t,function(t,s){a.push(n["default"].createElement("dt",{key:"aa-type-"+s,className:"drop-menu-sectitle"},n["default"].createElement("strong",null,d["default"].getDisplayType(s,!0))," ",n["default"].createElement("small",{className:"badge"},t.length))),l["default"].forEach(t,function(t,r){var o=e.props.isEditor?"/editor/bbox="+t.bbox.join("/"):"/analytics/"+t.id;a.push(n["default"].createElement("dd",{key:"aa-type-"+s+"-"+r,className:"drop-menu-result"},n["default"].createElement(p.Link,{to:o,onClick:e.onResultClick,title:t.name+" in "+t.parent.name},n["default"].createElement("strong",null,t.name),n["default"].createElement("small",null," ",n["default"].createElement("i",null,"in")," ",t.parent.name))))})}),n["default"].createElement("dl",{className:"drop-menu"},a)},render:function(){return n["default"].createElement("form",{className:"form-search",ref:"searchForm"},n["default"].createElement("div",{className:(0,c["default"])("drop dropdown center",{open:this.props.searching})},n["default"].createElement("div",{className:"input-group"},n["default"].createElement("input",{type:"search",className:"form-control input-search",placeholder:"Search administrative area",ref:"searchBox",onChange:l["default"].debounce(this.onSearchQueryChange,300)}),n["default"].createElement("span",{className:"input-group-bttn"},n["default"].createElement("a",{href:"#",className:"bttn-search",onClick:this.searchClick},n["default"].createElement("span",null,"Search")))),n["default"].createElement("div",{className:"drop-content search-results"},this.renderResults())))}});t.exports=h},{"../utils/dom":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/utils/dom.js","../utils/id":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/utils/id.js",classnames:"classnames",lodash:"lodash",react:"react","react-router":"react-router"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/components/site-header.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var r=e("react"),n=s(r),o=e("lodash"),l=s(o),i=e("./search"),c=s(i),p=e("react-router"),u=n["default"].createClass({displayName:"SiteHeader",propTypes:{fetchSearchResults:n["default"].PropTypes.func,cleanSearchResults:n["default"].PropTypes.func,routes:n["default"].PropTypes.array,search:n["default"].PropTypes.object},toggleMenuHandler:function(e){e.preventDefault(),this.refs.nav.classList.remove("show-search"),this.refs.nav.classList.toggle("show-menu")},toggleSearchHandler:function(e){e.preventDefault(),this.refs.nav.classList.remove("show-menu"),this.refs.nav.classList.toggle("show-search")},closeSearch:function(){this.refs.nav.classList.remove("show-menu"),this.refs.nav.classList.remove("show-search")},resizeHandler:function(){document.body.getBoundingClientRect().width>991&&(this.refs.nav.classList.remove("show-menu"),this.refs.nav.classList.remove("show-search"))},menuClickHandler:function(){this.refs.nav.classList.remove("show-menu")},componentDidMount:function(){this.refs.toggleMenu.addEventListener("click",this.toggleMenuHandler,!1),this.refs.toggleSearch.addEventListener("click",this.toggleSearchHandler,!1),this.resizeHandler=l["default"].debounce(this.resizeHandler,200),window.addEventListener("resize",this.resizeHandler)},componentWillUnmount:function(){this.refs.toggleMenu.removeEventListener("click",this.toggleMenuHandler),this.refs.toggleSearch.removeEventListener("click",this.toggleSearchHandler),window.removeEventListener("resize",this.resizeHandler)},render:function(){var e=l["default"].last(this.props.routes).path;return n["default"].createElement("header",{className:"site-header"},n["default"].createElement("div",{className:"inner"},n["default"].createElement("div",{className:"site__headline"},n["default"].createElement("h1",{className:"site__title"},n["default"].createElement(p.Link,{to:"/"},n["default"].createElement("img",{
src:"assets/graphics/layout/or-logo.png",width:"500",height:"63",alt:"Open Roads logo"}),n["default"].createElement("span",null,"Open Roads Analytics")))),n["default"].createElement("nav",{className:"site__nav",role:"navigation",ref:"nav"},n["default"].createElement("h2",{className:"toggle-search"},n["default"].createElement("a",{href:"#global-search",title:"Show search",ref:"toggleSearch"},n["default"].createElement("span",null,"Search"))),n["default"].createElement("div",{className:"search-wrapper"},n["default"].createElement("div",{className:"site__search"},n["default"].createElement(c["default"],{fetchSearchResults:this.props.fetchSearchResults,cleanSearchResults:this.props.cleanSearchResults,onResultClick:this.closeSearch,results:this.props.search.results,query:this.props.search.query,isEditor:"editor/*"===e||"editor"===e,fetching:this.props.search.fetching,searching:this.props.search.searching}))),n["default"].createElement("h2",{className:"toggle-menu"},n["default"].createElement("a",{href:"#global-menu",title:"Show menu",ref:"toggleMenu"},n["default"].createElement("span",null,"Menu"))),n["default"].createElement("div",{className:"menu-wrapper"},n["default"].createElement("ul",{className:"global-menu",id:"global-menu"},n["default"].createElement("li",null,n["default"].createElement(p.Link,{to:"/analytics",className:"global-menu-item",activeClassName:"global-menu-item--active",onClick:this.menuClickHandler},n["default"].createElement("span",null,"Analytics"))),n["default"].createElement("li",null,n["default"].createElement(p.Link,{to:"/editor",className:"global-menu-item",activeClassName:"global-menu-item--active",onClick:this.menuClickHandler},n["default"].createElement("span",null,"Map"))),n["default"].createElement("li",null,n["default"].createElement(p.Link,{to:"/about",className:"global-menu-item",activeClassName:"global-menu-item--active",onClick:this.menuClickHandler},n["default"].createElement("span",null,"About"))))))))}});t.exports=u},{"./search":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/components/search.js",lodash:"lodash",react:"react","react-router":"react-router"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/config.js":[function(e,t,a){"use strict";var s=e("lodash"),r={local:e("./config/local.js"),logo:e("./config/logo.js"),production:e("./config/production.js"),staging:e("./config/staging.js")},n=r.local||{};(0,s.defaultsDeep)(n,r.production),t.exports=n},{"./config/local.js":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/config/local.js","./config/logo.js":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/config/logo.js","./config/production.js":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/config/production.js","./config/staging.js":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/config/staging.js",lodash:"lodash"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/config/local.js":[function(e,t,a){"use strict";t.exports={}},{}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/config/logo.js":[function(e,t,a){"use strict";var s=["╭──────────────────────────────────────╮","│░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░│","│░░░░░░░░░░░░░░█░░░░░░░░░░░░░░░░░░░░░░░│","│░░░░░░░░░░░░░░░█░░█░░░░█░░░░░░░░░░░░░░│","│░░░░░░░░░░░░░░░██░░█░░██░░░░░░░░░░░░░░│","│░░░░░░░░░░░░░░░███░█░███░░░░░░░░░░░░░░│","│░░░░░░░░░░░░░░░███░████░░░░░░░░░░░░░░░│","│░░░░░░░░░░░░░░░███████░░░░░░█░░░█░░░░░│","│░░░░░░░░██░░░░░██████░░░░░██░░██░░░░░░│","│░░░░░█░░░██░░░░░█████░░░███░███░░░░░░░│","│░░░░░░██░░███░░░█████░░██████░░░░░░░░░│","│░░░░░░░░██░███░░█████░░████░░░░░░░░░░░│","│░░░░░░░░░██████░░████░███░░░░░░░░░░░░░│","│░░░░░░░░░░░░████░███░░█░░░░░░░░░░░░░░░│","│░░░░░░█████░░░░████░░░░░░░░░░░░░░░░░░░│","│░░░░░░░░██████░░░██░░░█░░░░░░░░░░░░░░░│","│░░░░░░░░░░░░████░█████░░░░░░░░░░░░░░░░│","│░░░░░░░░░░░░░░██████░░░░░░░░░░░░░░░░░░│","│░░░░░░░░░░░░░░░░░███░░░░░░░░░░░░░░░░░░│","╰──────────────────────────────────────╯"],r=[];s=s.map(function(e,t){return e.replace(/(^|[|│])|(░+)|(█+)/g,function(e,t,a,s){return t?(r.push("black"),"%c"+t):a?(r.push("#cf3f02"),"%c"+a):s||!e?(r.push("black"),"%c"+(s||"")):void 0})}).concat(["                                        ","%c           DEVELOPMENT SEED             "]).join("\n"),r=r.map(function(e){return"color: "+e}).concat(["color: #cf3f02; font-weight: bold"]),t.exports=[s].concat(r)},{}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/config/production.js":[function(e,t,a){"use strict";var s=e("./logo");t.exports={environment:"production",consoleMessage:s,api:"https://openroads-vn-api.herokuapp.com",mbToken:"pk.eyJ1Ijoib3BlbnJvYWRzIiwiYSI6InJ0aUQ2N3MifQ.R3hdFqriZr6kEUr-j_FYpg",editorUrl:"//orma.github.io/openroads-vn-iD/",roadNetTileLayerUrl:"http://50.16.162.86/dashboard/{z}/{x}/{y}.png"}},{"./logo":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/config/logo.js"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/config/staging.js":[function(e,t,a){"use strict";t.exports={environment:"staging",api:"http://50.16.162.86:4000"}},{}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/constants.js":[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.VPROMMS_IDS=["213YD00001","213YD00003","213YD00004","213YD00005","213YD00006","213YD00007","213YD00008","213YD00010","213YD00011","213YD00012","213YD00013","213YD00014","214YD00001","214YD00002","214YD00003","214YD00004","214YD00005","214YD00006","214YD00007","214YD00008","214YD00009","214YD00010","214YD00011","214YD00012","214YD00013","214YD00014","214YD00015","214YD00016","214YD00017","214YD00018","214YD00019","214YD00020","214YD00021","214YD00022","214YD00023","214YD00024","214YD00025","214YD00026","214YD00027","214YD00028","214YD00029","214YD00030","214YD00031","214YD00032","214YD00033","214YD00034","214YD00035","214YD00036","214YD00037","214YD00038","214YD00039","214YD00040","214YD00041","214YD00042","214YD00043","214YD00044","214YD00045","214YD00046","214YD00047","214YD00048","214YD00049","214YD00050","214YD00051","214YD00052","214YD00053","214YD00054","214YD00055","214YD00056","214YD00057","214YD00058","214YD00059","214YD00060","214YD00061","214YD00062","214YD00063","214YD00064","214YD00065","214YD00066","214YD00067","214YD00068","214YD00069","214YD00070","214YD00071","214YD00072","214YD00073","214YD00074","214YD00075","214YD00076","214YD00077","214YD00078","214YD00079","214YD00080","214YD00081","214YD00082","214YD00083","214YD00084","214YD00085","214YD00086","214YD00087","214YD00088","214YD00089","214YD00090","214YD00091","214YD00092","214YD00093","214YD00094","214YD00095","214YD00096","214YD00097","214YD00098","214YD00099","214YD00100"]},{}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/main.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}e("babel-polyfill");var r=e("react"),n=s(r),o=e("react-dom"),l=e("react-redux"),i=e("react-router"),c=e("redux"),p=e("redux-thunk"),u=s(p),d=e("react-router-redux"),f=e("./reducers/reducer"),h=s(f),m=e("./config"),g=s(m),E=e("./views/uhoh"),y=s(E),v=e("./views/app"),b=s(v),_=e("./views/home"),T=s(_),S=e("./views/editor"),N=s(S),k=e("./views/analytics-admin-area"),w=s(k),R=e("./views/admin-areas"),j=s(R),D=e("./views/tofix-tasks"),P=s(D),A=e("./views/project-tasks"),C=s(A),I=e("./views/projects"),U=s(I);e("mapbox.js"),L.mapbox.accessToken=g["default"].mbToken;var x=(0,d.syncHistory)(i.hashHistory),M=(0,c.compose)((0,c.applyMiddleware)(x,u["default"]))(c.createStore),O=M(h["default"]);(0,o.render)(n["default"].createElement(l.Provider,{store:O},n["default"].createElement(i.Router,{history:i.hashHistory},n["default"].createElement(i.Route,{path:"/",component:b["default"]},n["default"].createElement(i.Route,{path:"editor",component:N["default"]}),n["default"].createElement(i.Route,{path:"editor/*",component:N["default"]}),n["default"].createElement(i.Redirect,{from:"analytics",to:"analytics/0"}),n["default"].createElement(i.Redirect,{from:"analytics/tasks",to:"analytics/0/tasks"}),n["default"].createElement(i.Redirect,{from:"analytics/projecttasks",to:"analytics/0/projecttasks"}),n["default"].createElement(i.Redirect,{from:"analytics/admin-areas",to:"analytics/0/admin-areas"}),n["default"].createElement(i.Redirect,{from:"analytics/projects",to:"analytics/0/projects"}),n["default"].createElement(i.Route,{path:"analytics/:aaId",component:w["default"]}),n["default"].createElement(i.Route,{path:"analytics/:aaId/admin-areas",component:j["default"]}),n["default"].createElement(i.Route,{path:"analytics/:aaId/tasks",component:P["default"]}),n["default"].createElement(i.Route,{path:"analytics/:aaId/projecttasks",component:C["default"]}),n["default"].createElement(i.Route,{path:"analytics/:aaId/projects",component:U["default"]}),n["default"].createElement(i.IndexRoute,{component:T["default"]})),n["default"].createElement(i.Route,{path:"*",component:y["default"]}))),document.querySelector(".site-canvas"))},{"./config":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/config.js","./reducers/reducer":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/reducers/reducer.js","./views/admin-areas":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/views/admin-areas.js","./views/analytics-admin-area":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/views/analytics-admin-area.js","./views/app":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/views/app.js","./views/editor":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/views/editor.js","./views/home":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/views/home.js","./views/project-tasks":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/views/project-tasks.js","./views/projects":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/views/projects.js","./views/tofix-tasks":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/views/tofix-tasks.js","./views/uhoh":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/views/uhoh.js","babel-polyfill":"babel-polyfill","mapbox.js":"mapbox.js",react:"react","react-dom":"react-dom","react-redux":"react-redux","react-router":"react-router","react-router-redux":"react-router-redux",redux:"redux","redux-thunk":"redux-thunk"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/reducers/reducer.js":[function(e,t,a){"use strict";function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var n=e("lodash"),o=r(n),l=e("redux"),i=e("react-router-redux"),c=e("../actions/action-types"),p=s(c),u=e("../constants"),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{adminAreas:[],fetching:!1,fetched:!1},t=arguments[1];switch(t.type){case p.REQUEST_ADMIN_SUBREGIONS:console.log("REQUEST_ADMIN_SUBREGIONS"),e=o["default"].cloneDeep(e),e.fetching=!0;break;case p.RECEIVE_ADMIN_SUBREGIONS:console.log("RECEIVE_ADMIN_SUBREGIONS"),e=o["default"].cloneDeep(e),e=t.json,e.fetching=!1,e.fetched=!0}return e},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{results:[],fetching:!1,fetched:!1,query:"",searching:!1},t=arguments[1];switch(t.type){case p.REQUEST_SEARCH_RESULTS:console.log("REQUEST_SEARCH_RESULTS"),e=o["default"].cloneDeep(e),e.fetching=!0,e.query=t.query,e.searching=!0;break;case p.RECEIVE_SEARCH_RESULTS:console.log("RECEIVE_SEARCH_RESULTS"),e=o["default"].cloneDeep(e),e.results=t.json,e.fetching=!1;break;case p.CLEAN_SEARCH_RESULTS:console.log("CLEAN_SEARCH_RESULTS"),e=o["default"].cloneDeep(e),e.results=[],e.fetching=!1,e.fetched=!0,e.query="",e.searching=!1}return e},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{fetching:!1,fetched:!1,data:null},t=arguments[1];switch(t.type){case p.REQUEST_ADMIN_STATS:console.log("REQUEST_ADMIN_STATS"),e=o["default"].cloneDeep(e),e.error=null,e.fetching=!0;break;case p.RECEIVE_ADMIN_STATS:console.log("RECEIVE_ADMIN_STATS"),e=o["default"].cloneDeep(e),t.error?e.error=t.error:e=t.json,e.fetching=!1,e.fetched=!0}return e},m={fetching:!1,fetched:!1,data:{tasks:{meta:{page:null,limit:null,total:null},results:[]}}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments[1];switch(t.type){case p.REQUEST_TOFIX_TASKS:console.log("REQUEST_TOFIX_TASKS"),e=o["default"].cloneDeep(e),e.error=null,e.fetching=!0;break;case p.RECEIVE_TOFIX_TASKS:console.log("RECEIVE_TOFIX_TASKS"),e=o["default"].cloneDeep(e),t.error?e.error=t.error:e.data=t.json,e.fetching=!1,e.fetched=!0}return e},E={fetching:!1,fetched:!1,data:{projecttasks:{meta:{page:null,limit:null,total:null},results:[]}}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments[1];switch(t.type){case p.REQUEST_PROJECT_TASKS:console.log("REQUEST_PROJECT_TASKS"),e=o["default"].cloneDeep(e),e.error=null,e.fetching=!0;break;case p.RECEIVE_PROJECT_TASKS:console.log("RECEIVE_PROJECT_TASKS"),e=o["default"].cloneDeep(e),t.error?e.error=t.error:e.data=t.json,e.fetching=!1,e.fetched=!0}return e},v={fetching:!1,fetched:!1,data:{projects:{meta:{page:null,limit:null,total:null},results:[]}}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments[1];switch(t.type){case p.REQUEST_PROJECTS:console.log("REQUEST_PROJECTS"),e=o["default"].cloneDeep(e),e.error=null,e.fetching=!0;break;case p.RECEIVE_PROJECTS:console.log("RECEIVE_PROJECTS"),e=o["default"].cloneDeep(e),t.error?e.error=t.error:e.data=t.json,e.fetching=!1,e.fetched=!0}return e},_={fetching:!1,fetched:!1,data:{type:[]}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments[1];switch(t.type){case p.REQUEST_PROJECTS_META:console.log("REQUEST_PROJECTS_META"),e=o["default"].cloneDeep(e),e.error=null,e.fetching=!0;break;case p.RECEIVE_PROJECTS_META:console.log("RECEIVE_PROJECTS_META"),e=o["default"].cloneDeep(e),t.error?e.error=t.error:e.data=t.json,e.fetching=!1,e.fetched=!0}return e},S={fetching:!1,fetched:!1,data:{dataAvailable:null}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments[1];switch(t.type){case p.REQUEST_ROAD_NETWORK_STATUS:console.log("REQUEST_ROAD_NETWORK_STATUS"),e=o["default"].cloneDeep(e),e.error=null,e.fetching=!0;break;case p.RECEIVE_ROAD_NETWORK_STATUS:console.log("RECEIVE_ROAD_NETWORK_STATUS"),e=o["default"].cloneDeep(e),t.error?e.error=t.error:e.data=t.json,e.fetching=!1,e.fetched=!0}return e},k={fetching:!1,fetched:!1,data:u.VPROMMS_IDS.map(function(e){return{id:e,inTheDatabase:!1}})},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments[1];switch(t.type){case p.REQUEST_VPROMMS_IDS:e=o["default"].cloneDeep(e),e.error=null,e.fetching=!0;break;case p.RECEIVE_VPROMMS_IDS:e=o["default"].cloneDeep(e),t.error?e.error=t.error:e.data=e.data.map(function(e){return{id:e.id,inTheDatabase:t.json.includes(e.id)}}),e.fetching=!1,e.fetched=!0}return e};a["default"]=(0,l.combineReducers)({adminSubregions:d,search:f,stats:h,tofixtasks:g,projecttasks:y,projects:b,projectsMeta:T,roadNetworkStatus:N,VProMMSids:w,routing:i.routeReducer})},{"../actions/action-types":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/actions/action-types.js","../constants":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/constants.js",lodash:"lodash","react-router-redux":"react-router-redux",redux:"redux"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/utils/dom.js":[function(e,t,a){"use strict";function s(e,t){do{if(e.classList&&e.classList.contains(t))return!0;e=e.parentNode}while(e);return!1}function r(e,t){do{if(e===t)return!0;e=e.parentNode}while(e);return!1}Object.defineProperty(a,"__esModule",{value:!0}),a.parentHasClass=s,a.isDescendent=r},{}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/utils/format.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(0!==e&&!e||isNaN(e))return"-";var a=Math.round(100*parseFloat(e));return"undefined"!=typeof t&&!isNaN(t)&&a>t&&(a=t),a+"%"}function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(isNaN(e)||null===e)return"-";var a=c["default"].format(",."+t+"f")(e);return a.replace(new RegExp("\\.0{"+t+"}$"),"")}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e>=1e9?c["default"].format(",."+t+"f")(e/1e9)+" B":e>=1e6?c["default"].format(",."+t+"f")(e/1e6)+" M":c["default"].format(",."+t+"f")(e)}function l(e){return null===e?e:e=e.replace(/\//g,"/​")}Object.defineProperty(a,"__esModule",{value:!0}),a.formatPercent=r,a.formatThousands=n,a.formatCurrency=o,a.formatTableText=l;var i=e("d3"),c=s(i)},{d3:"d3"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/utils/id.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var r=e("lodash"),n=s(r),o=1e9,l=1e7,i=1e3,c={10:{r:0,p:2,m:6},11:{r:1,p:3,m:7}},p=function(e){this.id=e||99999999999,this.id=parseInt(n["default"].trim(this.id),10),this.verify(),this._type=this.identify()};p.prototype.COUNTRY="n",p.prototype.REGION="r",p.prototype.PROVINCE="p",p.prototype.MUNICIPALITY="m",p.prototype.BARANGAY="b",p.prototype.verify=function(){if(isNaN(this.id,10))throw new TypeError("this.ID must be parse-able as a number");var e=""+this.id,t=e.length;if(t>11||t<10)throw new Error("ID must be between 10 and 11 characters");return this},p.prototype.identify=function(){return 99999999999===this.id?"n":this.id%o===0?"r":this.id%l===0?"p":this.id%i===0?"m":"b"},p.prototype.type=function(){return this._type},p.prototype.level=function(){return{n:0,r:1,p:2,m:3,b:4}[this._type]},p.prototype.num=function(){return this.id},p.prototype.string=function(){return""+this.id},p.prototype.childType=function(){var e=["n","r","p","m","b"];return e[e.indexOf(this._type)+1]},p.prototype.display={n:{display:"Country"},r:{parent:"Country",display:"Region",plural:"Regions"},p:{parent:"Region",display:"Province",plural:"Provinces"},m:{parent:"Province",display:"Municipality",plural:"Municipalities"},b:{parent:"Municipality",display:"Barangay",plural:"Barangays"}},p.prototype.parentID=function(e){var t=this.string();if(e=parseInt(e,10),(isNaN(e)||e<0||e>4)&&(e=0===this.level()?0:this.level()-1),0===e)return null;if(e=["n","r","p","m","b"][e],"b"===e)return t;var a=c[t.length][e],s=n["default"].map(t.split(""),function(e,t){return t>a?"0":e});return s.join("")},p.prototype.getDisplayType=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?this.display[this.type()].plural:this.display[this.type()].display},p.prototype.getChildDisplayType=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?this.display[this.childType()].plural:this.display[this.childType()].display},p.getDisplayType=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return isNaN(parseInt(e,10))||(e=["n","r","p","m","b"][e]),t?p.prototype.display[e].plural:p.prototype.display[e].display},t.exports=p},{lodash:"lodash"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/views/admin-areas.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function r(e){return{subregions:e.adminSubregions,roadNetworkStatus:e.roadNetworkStatus}}function n(e){return{_fetchAdminSubregions:function(t){return e((0,p.fetchAdminSubregions)(t))},_fetchRoadNetworkStatus:function(t){return e((0,p.fetchRoadNetworkStatus)(t))}}}var o=e("react"),l=s(o),i=e("react-redux"),c=e("react-router"),p=e("../actions/action-creators"),u=e("../components/aa-list"),d=s(u),f=e("../components/page-header"),h=s(f),m=l["default"].createClass({displayName:"AdminAreas",propTypes:{children:l["default"].PropTypes.object,_fetchAdminSubregions:l["default"].PropTypes.func,_fetchRoadNetworkStatus:l["default"].PropTypes.func,subregions:l["default"].PropTypes.object,roadNetworkStatus:l["default"].PropTypes.object,params:l["default"].PropTypes.object},componentDidMount:function(){this.props._fetchAdminSubregions(this.props.params.aaId||null),this.props._fetchRoadNetworkStatus(this.props.params.aaId||null)},componentDidUpdate:function(e,t){this.props.params.aaId===e.params.aaId||this.props.subregions.fetching?console.log("AdminAreas componentDidUpdate","NOT update"):(console.log("AdminAreas componentDidUpdate","update"),this.props._fetchAdminSubregions(this.props.params.aaId),this.props._fetchRoadNetworkStatus(this.props.params.aaId))},renderPageHeader:function(){return l["default"].createElement(h["default"],{adminAreaId:this.props.subregions.id,pageTitle:this.props.subregions.name,roadNetworkStatus:this.props.roadNetworkStatus,bbox:this.props.subregions.bbox||[]})},renderBackLink:function(){return l["default"].createElement(c.Link,{to:"/analytics/"+this.props.subregions.id},"Back to overview")},renderList:function(){return l["default"].createElement(d["default"],{fetched:this.props.subregions.fetched,fetching:this.props.subregions.fetching,adminAreaId:this.props.subregions.id,adminAreaName:this.props.subregions.name,adminAreas:this.props.subregions.adminAreas})},render:function(){return l["default"].createElement("section",{className:"page page--list-solo"},this.renderPageHeader(),l["default"].createElement("div",{className:"page__body aa"},l["default"].createElement("div",{className:"aa-main"},l["default"].createElement("div",{className:"inner"},l["default"].createElement("div",{className:"col--main"},this.renderBackLink(),this.renderList())))))}});t.exports=(0,i.connect)(r,n)(m)},{"../actions/action-creators":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/actions/action-creators.js","../components/aa-list":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/components/aa-list.js","../components/page-header":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/components/page-header.js",react:"react","react-redux":"react-redux","react-router":"react-router"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/views/analytics-admin-area.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function r(e){return{VProMMSids:e.VProMMSids}}function n(e){return{_fetchVProMMSids:function(t){return e((0,c.fetchVProMMSids)())}}}var o=e("react"),l=s(o),i=e("react-redux"),c=e("../actions/action-creators"),p=l["default"].createClass({displayName:"AnalyticsAA",propTypes:{children:l["default"].PropTypes.object,_fetchVProMMSids:l["default"].PropTypes.func,VProMMSids:l["default"].PropTypes.object,params:l["default"].PropTypes.object},componentDidMount:function(){this.props._fetchVProMMSids()},render:function(){var e=this.props.VProMMSids.data,t=e.filter(function(e){return e.inTheDatabase}).length,a=e.length,s=(t/a*100).toFixed(2);return l["default"].createElement("section",{className:"page"},l["default"].createElement("div",{className:"page__body aa"},l["default"].createElement("div",{className:"aa-main"},l["default"].createElement("h2",{className:"complete"},s," % of VProMMS Ids added (",t," of ",a,")"),l["default"].createElement("ul",null,e.map(function(e){return l["default"].createElement("li",{key:e.id},e.id,": ",e.inTheDatabase?"added":"not added")})))))}});t.exports=(0,i.connect)(r,n)(p)},{"../actions/action-creators":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/actions/action-creators.js",react:"react","react-redux":"react-redux"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/views/app.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function r(e){return{subregions:e.adminSubregions,search:e.search}}function n(e){return{_fetchSearchResults:function(t){return e((0,u.fetchSearchResults)(t))},_cleanSearchResults:function(){return e((0,u.cleanSearchResults)())}}}var o=e("react"),l=s(o),i=e("react-redux"),c=e("lodash"),p=s(c),u=e("../actions/action-creators"),d=e("../components/site-header"),f=s(d),h=l["default"].createClass({displayName:"App",propTypes:{_fetchSearchResults:l["default"].PropTypes.func,_cleanSearchResults:l["default"].PropTypes.func,search:l["default"].PropTypes.object,routes:l["default"].PropTypes.array,children:l["default"].PropTypes.object},render:function(){var e=p["default"].last(this.props.routes).path,t=void 0;switch(e){case void 0:t="page--landing";break;default:t=e.split("/")[0]}return l["default"].createElement("div",{className:t},l["default"].createElement(f["default"],{fetchSearchResults:this.props._fetchSearchResults,cleanSearchResults:this.props._cleanSearchResults,routes:this.props.routes,search:this.props.search}),l["default"].createElement("main",{className:"site-body"},this.props.children))}});t.exports=(0,i.connect)(r,n)(h)},{"../actions/action-creators":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/actions/action-creators.js","../components/site-header":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/components/site-header.js",lodash:"lodash",react:"react","react-redux":"react-redux"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/views/editor.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var r=e("react"),n=s(r),o=e("react-redux"),l=e("react-router-redux"),i=e("../config"),c=s(i),p=n["default"].createClass({displayName:"Editor",propTypes:{params:n["default"].PropTypes.object,dispatch:n["default"].PropTypes.func},messageListener:function(e){if("urlchange"===e.data.type)switch(e.data.id){case"or-editor":var t=this.cleanUrl(e.data.url,c["default"].editorUrl);this.props.dispatch((0,l.replace)("/editor/"+t))}else if("navigate"===e.data.type)switch(e.data.id){case"or-editor":this.props.dispatch((0,l.push)(e.data.url))}},cleanUrl:function(e,t){return e.replace(new RegExp("(http:|https:)?"+t+"/?#?"),"")},componentDidMount:function(){window.addEventListener("message",this.messageListener,!1)},componentWillUnmount:function(){window.removeEventListener("message",this.messageListener,!1)},render:function(){var e=c["default"].editorUrl+(this.props.params.splat?"#"+this.props.params.splat:"");return n["default"].createElement("iframe",{src:e,id:"main-frame",name:"main-frame"})}});t.exports=(0,o.connect)()(p)},{"../config":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/config.js",react:"react","react-redux":"react-redux","react-router-redux":"react-router-redux"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/views/home.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var r=e("react"),n=s(r),o=e("react-router"),l=n["default"].createClass({displayName:"Home",render:function(){return n["default"].createElement("section",null,n["default"].createElement("header",{className:"page__header--landing"},n["default"].createElement("div",{className:"page__headline--landing"},n["default"].createElement("h1",{className:"page__title--landing"},n["default"].createElement("img",{src:"assets/graphics/layout/or-logo.png",width:"500",height:"63",alt:"Open Roads logo"}),n["default"].createElement("span",null,"Welcome")),n["default"].createElement("p",{className:"page__description--landing"},"Mapping, tracking and visualizing road projects in Vietnam for inclusive growth"))),n["default"].createElement("div",{className:"page__body--landing"},n["default"].createElement("div",{className:"inner"},n["default"].createElement("h2",null,"Access and improve Road Networks"),n["default"].createElement("p",{className:"description"}),n["default"].createElement("p",{className:"description"},"Work with the OpenRoads project to close this critical information gap and create a comprehensive road network map of Vietnam."),n["default"].createElement(o.Link,{to:"/analytics",className:"bttn-explore"},"Explore more"))))}});t.exports=l},{react:"react","react-router":"react-router"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/views/project-tasks.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function r(e){return{subregions:e.adminSubregions,projecttasks:e.projecttasks,roadNetworkStatus:e.roadNetworkStatus}}function n(e){return{_fetchAdminSubregions:function(t){return e((0,f.fetchAdminSubregions)(t))},_fetchProjectTasks:function(t,a,s){return e((0,f.fetchProjectTasks)(t,a,s))},_fetchRoadNetworkStatus:function(t){return e((0,f.fetchRoadNetworkStatus)(t))},_push:function(t){return e((0,p.push)(t))}}}var o=e("react"),l=s(o),i=e("react-redux"),c=e("react-router"),p=e("react-router-redux"),u=e("react-paginate"),d=s(u),f=e("../actions/action-creators"),h=e("../components/page-header"),m=s(h),g=l["default"].createClass({displayName:"ProjectTasks",propTypes:{children:l["default"].PropTypes.object,_fetchProjectTasks:l["default"].PropTypes.func,_fetchAdminSubregions:l["default"].PropTypes.func,_fetchRoadNetworkStatus:l["default"].PropTypes.func,_push:l["default"].PropTypes.func,subregions:l["default"].PropTypes.object,params:l["default"].PropTypes.object,location:l["default"].PropTypes.object,roadNetworkStatus:l["default"].PropTypes.object,projecttasks:l["default"].PropTypes.object},perPage:20,getPage:function(){var e=this.props.location.query.page;return e=isNaN(e)||e<1?1:e},getTotalPages:function(){console.log("this.props.projecttasks",this.props.projecttasks);var e=this.props.projecttasks.data.projecttasks.meta,t=e.total,a=e.limit;return Math.ceil(t/a)},componentDidMount:function(){console.log("this.props.params.aaId",this.props.params.aaId),this.props._fetchAdminSubregions(this.props.params.aaId||null),this.props._fetchProjectTasks(this.props.params.aaId||null,this.getPage(),this.perPage),this.props._fetchRoadNetworkStatus(this.props.params.aaId||null)},componentDidUpdate:function(e,t){console.group("ProjectTasks componentDidUpdate"),this.props.params.aaId!==e.params.aaId?(console.log("aaId changed"),this.props.subregions.fetching||(console.log("update subregions"),this.props._fetchAdminSubregions(this.props.params.aaId),this.props._fetchRoadNetworkStatus(this.props.params.aaId)),this.props.projecttasks.fetching||(console.log("update tofixtasks"),this.props._fetchProjectTasks(this.props.params.aaId,this.getPage(),this.perPage))):this.props.location.query.page&&this.getPage()!==e.location.query.page?(console.log("page changed"),this.props._fetchProjectTasks(this.props.params.aaId,this.getPage(),this.perPage)):console.log("NOT update"),console.groupEnd("ProjectTasks componentDidUpdate")},handlePageClick:function(e){var t="analytics/"+this.props.subregions.id+"/projecttasks?page="+(e.selected+1);this.props._push(t)},renderPageHeader:function(){return l["default"].createElement(m["default"],{adminAreaId:this.props.subregions.id,pageTitle:this.props.subregions.name,roadNetworkStatus:this.props.roadNetworkStatus,bbox:this.props.subregions.bbox||[]})},renderBackLink:function(){return l["default"].createElement(c.Link,{to:"/analytics/"+this.props.subregions.id},"Back to overview")},renderContent:function(){var e=this.props.subregions.fetching||this.props.projecttasks.fetching,t=this.props.projecttasks.data.projecttasks,a=void 0;
return e?a=l["default"].createElement("ul",{className:"loading-placeholder"},l["default"].createElement("li",{className:"aa-tofixtasks__wrapper"},l["default"].createElement("p",null," ")),l["default"].createElement("li",{className:"aa-tofixtasks__wrapper"},l["default"].createElement("p",null," ")),l["default"].createElement("li",{className:"aa-tofixtasks__wrapper"},l["default"].createElement("p",null," "))):t.error?a=l["default"].createElement("p",{className:"aa-tofixtasks--empty"},"Oops... An error occurred."):t.meta.total||(a=l["default"].createElement("p",{className:"aa-tofixtasks--empty"},"Nothing to show.")),a?l["default"].createElement("div",{className:"aa-tofixtasks__contents"},a):l["default"].createElement("div",{className:"aa-tofixtasks__contents"},l["default"].createElement("ul",null,t.results.map(function(e){var t=e.type.replace(" ","-").toLowerCase();return l["default"].createElement("li",{key:e.id},l["default"].createElement(c.Link,{to:"editor/bbox="+e.bbox.join("/")+"&overlays="+t,className:"aa-tofixtasks__wrapper"},l["default"].createElement("p",null,"Missing Road for project ",l["default"].createElement("strong",null,e.id))))})))},renderList:function(){var e=this.props.subregions.fetched&&this.props.projecttasks.fetched,t=this.props.subregions.fetching||this.props.projecttasks.fetching;if(!e&&!t)return null;var a="Missing Roads";return e&&!t&&this.props.projecttasks.data.projecttasks.meta.total&&(a+=" ("+this.props.projecttasks.data.projecttasks.meta.total+")"),l["default"].createElement("div",{className:"aa-tofixtasks"},l["default"].createElement("h2",{className:"aa-tofixtasks__title"},a),this.renderContent())},renderPagination:function(){var e=this.props.projecttasks,t=e.fetched,a=e.fetching,s=e.error,r=this.props.subregions,n=r.fetched,o=r.fetching,i=t&&n,c=a||o;return this.getTotalPages()<=1||s||!i||c?null:l["default"].createElement(d["default"],{previousLabel:l["default"].createElement("span",null,"previous"),nextLabel:l["default"].createElement("span",null,"next"),breakLabel:l["default"].createElement("span",{className:"pages__page"},"..."),pageNum:this.getTotalPages(),forceSelected:this.getPage()-1,marginPagesDisplayed:2,pageRangeDisplayed:5,clickCallback:this.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages",pageClassName:"pages__wrapper",pageLinkClassName:"pages__page",activeClassName:"active"})},render:function(){return l["default"].createElement("section",{className:"page page--list-solo"},this.renderPageHeader(),l["default"].createElement("div",{className:"page__body aa"},l["default"].createElement("div",{className:"aa-main"},l["default"].createElement("div",{className:"inner"},l["default"].createElement("div",{className:"col--main"},this.renderBackLink(),this.renderList(),this.renderPagination())))))}});t.exports=(0,i.connect)(r,n)(g)},{"../actions/action-creators":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/actions/action-creators.js","../components/page-header":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/components/page-header.js",react:"react","react-paginate":"react-paginate","react-redux":"react-redux","react-router":"react-router","react-router-redux":"react-router-redux"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/views/projects.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function r(e){return{subregions:e.adminSubregions,projects:e.projects,projectsMeta:e.projectsMeta,roadNetworkStatus:e.roadNetworkStatus}}function n(e){return{_fetchAdminSubregions:function(t){return e((0,m.fetchAdminSubregions)(t))},_fetchProjects:function(t,a,s,r){return e((0,m.fetchProjects)(t,a,s,r))},_fetchProjectsMeta:function(){return e((0,m.fetchProjectsMeta)())},_fetchRoadNetworkStatus:function(t){return e((0,m.fetchRoadNetworkStatus)(t))},_push:function(t){return e((0,p.push)(t))}}}var o=e("react"),l=s(o),i=e("react-redux"),c=e("react-router"),p=e("react-router-redux"),u=e("react-paginate"),d=s(u),f=e("lodash"),h=s(f),m=e("../actions/action-creators"),g=e("../components/project-list"),E=s(g),y=e("../components/page-header"),v=s(y),b=l["default"].createClass({displayName:"Projects",propTypes:{children:l["default"].PropTypes.object,_fetchProjects:l["default"].PropTypes.func,_fetchAdminSubregions:l["default"].PropTypes.func,_fetchProjectsMeta:l["default"].PropTypes.func,_fetchRoadNetworkStatus:l["default"].PropTypes.func,_push:l["default"].PropTypes.func,subregions:l["default"].PropTypes.object,params:l["default"].PropTypes.object,location:l["default"].PropTypes.object,projects:l["default"].PropTypes.object,roadNetworkStatus:l["default"].PropTypes.object,projectsMeta:l["default"].PropTypes.object},perPage:20,getPage:function(){var e=this.props.location.query.page;return e=isNaN(e)||e<1?1:e},getTotalPages:function(){var e=this.props.projects.data.projects.meta,t=e.total,a=e.limit;return Math.ceil(t/a)},getFilters:function(){var e={};return e.type=this.props.location.query.type,e},componentDidMount:function(){console.log("this.props.params.aaId",this.props.params.aaId),this.props._fetchAdminSubregions(this.props.params.aaId||null),this.props._fetchProjects(this.props.params.aaId||null,this.getPage(),this.perPage,this.getFilters()),this.props._fetchProjectsMeta(),this.props._fetchRoadNetworkStatus(this.props.params.aaId||null)},componentDidUpdate:function(e,t){var a=this.getFilters(),s=!1;this.props.projectsMeta.fetched&&h["default"].forEach(a,function(t,a){if(e.location.query[a]!==t)return void(s=!0)}),console.group("Projects componentDidUpdate"),this.props.params.aaId!==e.params.aaId?(console.log("aaId changed"),this.props.subregions.fetching||(console.log("update subregions"),this.props._fetchAdminSubregions(this.props.params.aaId),this.props._fetchRoadNetworkStatus(this.props.params.aaId)),this.props.projects.fetching||(console.log("update projects"),this.props._fetchProjects(this.props.params.aaId,this.getPage(),this.perPage,this.getFilters()))):this.props.location.query.page&&this.getPage()!==e.location.query.page||s?(console.log("page or filters changed"),this.props._fetchProjects(this.props.params.aaId,this.getPage(),this.perPage,this.getFilters())):console.log("NOT update"),console.groupEnd("Projects componentDidUpdate")},handlePageClick:function(e){var t=this.getFilters();t.page=e.selected+1,this.props._push({pathname:"analytics/"+this.props.subregions.id+"/projects",query:t})},handleFilterApply:function(e){e.page=1,this.props._push({pathname:"analytics/"+this.props.subregions.id+"/projects",query:e})},renderPageHeader:function(){return l["default"].createElement(v["default"],{adminAreaId:this.props.subregions.id,pageTitle:this.props.subregions.name,roadNetworkStatus:this.props.roadNetworkStatus,bbox:this.props.subregions.bbox||[]})},renderBackLink:function(){return l["default"].createElement(c.Link,{to:"/analytics/"+this.props.subregions.id},"Back to overview")},renderList:function(){var e=this.props.subregions.fetched&&this.props.projects.fetched&&this.props.projectsMeta.fetched,t=this.props.subregions.fetching||this.props.projects.fetching||this.props.projectsMeta.fetching;return l["default"].createElement(E["default"],{fetched:e,fetching:t,adminAreaId:Number(this.props.projects.data.id),adminAreaName:this.props.projects.data.name,meta:this.props.projects.data.projects.meta,projects:this.props.projects.data.projects.results,projectsMeta:this.props.projectsMeta.data,activeFilters:this.getFilters(),onFilterChange:this.handleFilterChange,onFilterApply:this.handleFilterApply,error:this.props.projects.error})},renderPagination:function(){var e=this.props.projects,t=e.fetched,a=e.fetching,s=e.error,r=this.props.subregions,n=r.fetched,o=r.fetching,i=t&&n,c=a||o;return this.getTotalPages()<=1||s||!i||c?null:l["default"].createElement(d["default"],{previousLabel:l["default"].createElement("span",null,"previous"),nextLabel:l["default"].createElement("span",null,"next"),breakLabel:l["default"].createElement("span",{className:"pages__page"},"..."),pageNum:this.getTotalPages(),forceSelected:this.getPage()-1,marginPagesDisplayed:2,pageRangeDisplayed:5,clickCallback:this.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages",pageClassName:"pages__wrapper",pageLinkClassName:"pages__page",activeClassName:"active"})},render:function(){return l["default"].createElement("section",{className:"page page--list-solo"},this.renderPageHeader(),l["default"].createElement("div",{className:"page__body aa"},l["default"].createElement("div",{className:"aa-main"},l["default"].createElement("div",{className:"inner"},l["default"].createElement("div",{className:"col--main"},this.renderBackLink(),this.renderList(),this.renderPagination())))))}});t.exports=(0,i.connect)(r,n)(b)},{"../actions/action-creators":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/actions/action-creators.js","../components/page-header":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/components/page-header.js","../components/project-list":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/components/project-list.js",lodash:"lodash",react:"react","react-paginate":"react-paginate","react-redux":"react-redux","react-router":"react-router","react-router-redux":"react-router-redux"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/views/tofix-tasks.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function r(e){return{subregions:e.adminSubregions,tofixtasks:e.tofixtasks,roadNetworkStatus:e.roadNetworkStatus}}function n(e){return{_fetchAdminSubregions:function(t){return e((0,f.fetchAdminSubregions)(t))},_fetchTofixTasks:function(t,a,s){return e((0,f.fetchTofixTasks)(t,a,s))},_fetchRoadNetworkStatus:function(t){return e((0,f.fetchRoadNetworkStatus)(t))},_push:function(t){return e((0,p.push)(t))}}}var o=e("react"),l=s(o),i=e("react-redux"),c=e("react-router"),p=e("react-router-redux"),u=e("react-paginate"),d=s(u),f=e("../actions/action-creators"),h=e("../components/aa-tofix-tasks"),m=s(h),g=e("../components/page-header"),E=s(g),y=l["default"].createClass({displayName:"TofixTasks",propTypes:{children:l["default"].PropTypes.object,_fetchTofixTasks:l["default"].PropTypes.func,_fetchAdminSubregions:l["default"].PropTypes.func,_fetchRoadNetworkStatus:l["default"].PropTypes.func,_push:l["default"].PropTypes.func,subregions:l["default"].PropTypes.object,params:l["default"].PropTypes.object,location:l["default"].PropTypes.object,roadNetworkStatus:l["default"].PropTypes.object,tofixtasks:l["default"].PropTypes.object},perPage:20,getPage:function(){var e=this.props.location.query.page;return e=isNaN(e)||e<1?1:e},getTotalPages:function(){var e=this.props.tofixtasks.data.tasks.meta,t=e.total,a=e.limit;return Math.ceil(t/a)},componentDidMount:function(){console.log("this.props.params.aaId",this.props.params.aaId),this.props._fetchAdminSubregions(this.props.params.aaId||null),this.props._fetchTofixTasks(this.props.params.aaId||null,this.getPage(),this.perPage),this.props._fetchRoadNetworkStatus(this.props.params.aaId||null)},componentDidUpdate:function(e,t){console.group("TofixTasks componentDidUpdate"),this.props.params.aaId!==e.params.aaId?(console.log("aaId changed"),this.props.subregions.fetching||(console.log("update subregions"),this.props._fetchAdminSubregions(this.props.params.aaId),this.props._fetchRoadNetworkStatus(this.props.params.aaId)),this.props.tofixtasks.fetching||(console.log("update tofixtasks"),this.props._fetchTofixTasks(this.props.params.aaId,this.getPage(),this.perPage))):this.props.location.query.page&&this.getPage()!==e.location.query.page?(console.log("page changed"),this.props._fetchTofixTasks(this.props.params.aaId,this.getPage(),this.perPage)):console.log("NOT update"),console.groupEnd("TofixTasks componentDidUpdate")},handlePageClick:function(e){var t="analytics/"+this.props.subregions.id+"/tasks?page="+(e.selected+1);this.props._push(t)},renderPageHeader:function(){return l["default"].createElement(E["default"],{adminAreaId:this.props.subregions.id,pageTitle:this.props.subregions.name,roadNetworkStatus:this.props.roadNetworkStatus,bbox:this.props.subregions.bbox||[]})},renderBackLink:function(){return l["default"].createElement(c.Link,{to:"/analytics/"+this.props.subregions.id},"Back to overview")},renderList:function(){var e=this.props.subregions.fetched&&this.props.tofixtasks.fetched,t=this.props.subregions.fetching||this.props.tofixtasks.fetching;return l["default"].createElement(m["default"],{fetched:e,fetching:t,adminAreaId:Number(this.props.tofixtasks.data.id),adminAreaName:this.props.tofixtasks.data.name,meta:this.props.tofixtasks.data.tasks.meta,tasks:this.props.tofixtasks.data.tasks.results,error:this.props.tofixtasks.error})},renderPagination:function(){var e=this.props.tofixtasks,t=e.fetched,a=e.fetching,s=e.error,r=this.props.subregions,n=r.fetched,o=r.fetching,i=t&&n,c=a||o;return this.getTotalPages()<=1||s||!i||c?null:l["default"].createElement(d["default"],{previousLabel:l["default"].createElement("span",null,"previous"),nextLabel:l["default"].createElement("span",null,"next"),breakLabel:l["default"].createElement("span",{className:"pages__page"},"..."),pageNum:this.getTotalPages(),forceSelected:this.getPage()-1,marginPagesDisplayed:2,pageRangeDisplayed:5,clickCallback:this.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages",pageClassName:"pages__wrapper",pageLinkClassName:"pages__page",activeClassName:"active"})},render:function(){return l["default"].createElement("section",{className:"page page--list-solo"},this.renderPageHeader(),l["default"].createElement("div",{className:"page__body aa"},l["default"].createElement("div",{className:"aa-main"},l["default"].createElement("div",{className:"inner"},l["default"].createElement("div",{className:"col--main"},this.renderBackLink(),this.renderList(),this.renderPagination())))))}});t.exports=(0,i.connect)(r,n)(y)},{"../actions/action-creators":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/actions/action-creators.js","../components/aa-tofix-tasks":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/components/aa-tofix-tasks.js","../components/page-header":"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/components/page-header.js",react:"react","react-paginate":"react-paginate","react-redux":"react-redux","react-router":"react-router","react-router-redux":"react-router-redux"}],"/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/views/uhoh.js":[function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var r=e("react"),n=s(r),o=n["default"].createClass({displayName:"UhOh",render:function(){return n["default"].createElement("div",null,n["default"].createElement("h2",null,"404 Not found"),n["default"].createElement("p",null,"UhOh that is a bummer."))}});t.exports=o},{react:"react"}]},{},["/Users/andrewbollinger/github-repos/openroads-vn-analytics/app/assets/scripts/main.js"]);